{"ast":null,"code":"var _jsxFileName = \"/home/truongduchuy910/apps/tuvi/app/utils/MessengerChat.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n/**\n * Utils\n */\n\nconst removeElementByIds = ids => {\n  ids.forEach(id => {\n    const element = document.getElementById(id);\n\n    if (element && element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  });\n};\n/**\n * Messenger Chat Plugin\n */\n\n\nclass MessengerChat extends Component {\n  constructor(props) {\n    super(props);\n    this.setFbAsyncInit = this.setFbAsyncInit.bind(this);\n    this.reloadSDKAsynchronously = this.reloadSDKAsynchronously.bind(this);\n    this.loadSDKAsynchronously = this.loadSDKAsynchronously.bind(this);\n    this.createMarkup = this.createMarkup.bind(this);\n    this.controlPlugin = this.controlPlugin.bind(this);\n    this.subscribeEvents = this.subscribeEvents.bind(this);\n    this.removeFacebookSDK = this.removeFacebookSDK.bind(this);\n    this.state = {\n      fbLoaded: false,\n      shouldShowDialog: undefined\n    };\n  }\n\n  componentDidMount() {\n    this.setFbAsyncInit();\n    this.reloadSDKAsynchronously();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.pageId !== this.props.pageId || // prevProps.appId !== this.props.appId ||\n    prevProps.shouldShowDialog !== this.props.shouldShowDialog || prevProps.htmlRef !== this.props.htmlRef || prevProps.minimized !== this.props.minimized || prevProps.themeColor !== this.props.themeColor || prevProps.loggedInGreeting !== this.props.loggedInGreeting || prevProps.loggedOutGreeting !== this.props.loggedOutGreeting || prevProps.greetingDialogDisplay !== this.props.greetingDialogDisplay || prevProps.greetingDialogDelay !== this.props.greetingDialogDelay || prevProps.autoLogAppEvents !== this.props.autoLogAppEvents || prevProps.xfbml !== this.props.xfbml || prevProps.version !== this.props.version || prevProps.language !== this.props.language) {\n      this.setFbAsyncInit();\n      this.reloadSDKAsynchronously();\n    }\n  }\n\n  setFbAsyncInit() {\n    const {\n      autoLogAppEvents,\n      xfbml,\n      version\n    } = this.props;\n\n    window.fbAsyncInit = () => {\n      window.FB.init({\n        // appId,\n        autoLogAppEvents,\n        xfbml,\n        version: `v${version}`\n      });\n      this.setState({\n        fbLoaded: true\n      });\n    };\n  }\n\n  loadSDKAsynchronously() {\n    // const { language } = this.props\n\n    /* eslint-disable */\n    (function (d, s, id) {\n      var js,\n          fjs = d.getElementsByTagName(s)[0];\n\n      if (d.getElementById(id)) {\n        return;\n      }\n\n      js = d.createElement(s);\n      js.id = id;\n      js.src = `https://connect.facebook.net/vi_VN/sdk/xfbml.customerchat.js`;\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, \"script\", \"facebook-jssdk\");\n    /* eslint-enable */\n\n  }\n\n  removeFacebookSDK() {\n    removeElementByIds([\"facebook-jssdk\", \"fb-root\"]);\n    delete window.FB;\n  }\n\n  reloadSDKAsynchronously() {\n    this.removeFacebookSDK();\n    this.loadSDKAsynchronously();\n  }\n\n  controlPlugin() {\n    const {\n      shouldShowDialog\n    } = this.props;\n\n    if (shouldShowDialog) {\n      window.FB.CustomerChat.showDialog();\n    } else {\n      window.FB.CustomerChat.hideDialog();\n    }\n  }\n\n  subscribeEvents() {\n    const {\n      onCustomerChatDialogShow,\n      onCustomerChatDialogHide\n    } = this.props;\n\n    if (onCustomerChatDialogShow) {\n      window.FB.Event.subscribe(\"customerchat.dialogShow\", onCustomerChatDialogShow);\n    }\n\n    if (onCustomerChatDialogHide) {\n      window.FB.Event.subscribe(\"customerchat.dialogHide\", onCustomerChatDialogHide);\n    }\n  }\n\n  createMarkup() {\n    const {\n      pageId,\n      htmlRef,\n      minimized,\n      themeColor,\n      loggedInGreeting,\n      loggedOutGreeting,\n      greetingDialogDisplay,\n      greetingDialogDelay\n    } = this.props;\n    const refAttribute = htmlRef !== undefined ? `ref=\"${htmlRef}\"` : \"\";\n    const minimizedAttribute = minimized !== undefined ? `minimized=\"${minimized}\"` : \"\";\n    const themeColorAttribute = themeColor !== undefined ? `theme_color=\"${themeColor}\"` : \"\";\n    const loggedInGreetingAttribute = loggedInGreeting !== undefined ? `logged_in_greeting=\"${loggedInGreeting}\"` : \"\";\n    const loggedOutGreetingAttribute = loggedOutGreeting !== undefined ? `logged_out_greeting=\"${loggedOutGreeting}\"` : \"\";\n    const greetingDialogDisplayAttribute = greetingDialogDisplay !== undefined ? `greeting_dialog_display=\"${greetingDialogDisplay}\"` : \"\";\n    const greetingDialogDelayAttribute = greetingDialogDelay !== undefined ? `greeting_dialog_delay=\"${greetingDialogDelay}\"` : \"\";\n    return {\n      __html: `<div\n             class=\"fb-customerchat\"\n             page_id=\"${pageId}\"\n             ${refAttribute}\n             ${minimizedAttribute}\n             ${themeColorAttribute}\n             ${loggedInGreetingAttribute}\n             ${loggedOutGreetingAttribute}\n             ${greetingDialogDisplayAttribute}\n             ${greetingDialogDelayAttribute}\n           ></div>`\n    };\n  }\n\n  render() {\n    const {\n      fbLoaded,\n      shouldShowDialog\n    } = this.state;\n\n    if (fbLoaded && shouldShowDialog !== this.props.shouldShowDialog) {\n      document.addEventListener(\"DOMNodeInserted\", event => {\n        const element = event.target;\n\n        if (element.className && typeof element.className === \"string\" && element.className.includes(\"fb_dialog\")) {\n          this.controlPlugin();\n        }\n      }, false);\n      this.subscribeEvents();\n    } // Add a random key to rerender. Reference:\n    // https://stackoverflow.com/questions/30242530/dangerouslysetinnerhtml-doesnt-update-during-render\n\n\n    return __jsx(\"div\", {\n      key: Date(),\n      dangerouslySetInnerHTML: this.createMarkup(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    });\n  }\n\n}\n\n_defineProperty(MessengerChat, \"propTypes\", {\n  pageId: PropTypes.string.isRequired,\n  // appId:                    PropTypes.string.isRequired,\n  shouldShowDialog: PropTypes.bool,\n  htmlRef: PropTypes.string,\n  minimized: PropTypes.bool,\n  themeColor: PropTypes.string,\n  loggedInGreeting: PropTypes.string,\n  loggedOutGreeting: PropTypes.string,\n  greetingDialogDisplay: PropTypes.oneOf([\"show\", \"hide\", \"fade\"]),\n  greetingDialogDelay: PropTypes.number,\n  autoLogAppEvents: PropTypes.bool,\n  xfbml: PropTypes.bool,\n  version: PropTypes.string,\n  // language:                 PropTypes.string,\n  onCustomerChatDialogShow: PropTypes.func,\n  onCustomerChatDialogHide: PropTypes.func\n});\n\n_defineProperty(MessengerChat, \"defaultProps\", {\n  shouldShowDialog: false,\n  htmlRef: undefined,\n  minimized: undefined,\n  themeColor: undefined,\n  loggedInGreeting: undefined,\n  loggedOutGreeting: undefined,\n  greetingDialogDisplay: undefined,\n  greetingDialogDelay: undefined,\n  autoLogAppEvents: true,\n  xfbml: true,\n  version: \"6.0\",\n  onCustomerChatDialogShow: undefined,\n  onCustomerChatDialogHide: undefined\n});\n\nexport default MessengerChat;","map":{"version":3,"sources":["/home/truongduchuy910/apps/tuvi/app/utils/MessengerChat.js"],"names":["React","Component","PropTypes","removeElementByIds","ids","forEach","id","element","document","getElementById","parentNode","removeChild","MessengerChat","constructor","props","setFbAsyncInit","bind","reloadSDKAsynchronously","loadSDKAsynchronously","createMarkup","controlPlugin","subscribeEvents","removeFacebookSDK","state","fbLoaded","shouldShowDialog","undefined","componentDidMount","componentDidUpdate","prevProps","pageId","htmlRef","minimized","themeColor","loggedInGreeting","loggedOutGreeting","greetingDialogDisplay","greetingDialogDelay","autoLogAppEvents","xfbml","version","language","window","fbAsyncInit","FB","init","setState","d","s","js","fjs","getElementsByTagName","createElement","src","insertBefore","CustomerChat","showDialog","hideDialog","onCustomerChatDialogShow","onCustomerChatDialogHide","Event","subscribe","refAttribute","minimizedAttribute","themeColorAttribute","loggedInGreetingAttribute","loggedOutGreetingAttribute","greetingDialogDisplayAttribute","greetingDialogDelayAttribute","__html","render","addEventListener","event","target","className","includes","Date","string","isRequired","bool","oneOf","number","func"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\n/**\n * Utils\n */\nconst removeElementByIds = ids => {\n  ids.forEach(id => {\n    const element = document.getElementById(id);\n    if (element && element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  });\n};\n\n/**\n * Messenger Chat Plugin\n */\nclass MessengerChat extends Component {\n  static propTypes = {\n    pageId: PropTypes.string.isRequired,\n    // appId:                    PropTypes.string.isRequired,\n    shouldShowDialog: PropTypes.bool,\n    htmlRef: PropTypes.string,\n    minimized: PropTypes.bool,\n    themeColor: PropTypes.string,\n    loggedInGreeting: PropTypes.string,\n    loggedOutGreeting: PropTypes.string,\n    greetingDialogDisplay: PropTypes.oneOf([\"show\", \"hide\", \"fade\"]),\n    greetingDialogDelay: PropTypes.number,\n    autoLogAppEvents: PropTypes.bool,\n    xfbml: PropTypes.bool,\n    version: PropTypes.string,\n    // language:                 PropTypes.string,\n    onCustomerChatDialogShow: PropTypes.func,\n    onCustomerChatDialogHide: PropTypes.func\n  };\n\n  static defaultProps = {\n    shouldShowDialog: false,\n    htmlRef: undefined,\n    minimized: undefined,\n    themeColor: undefined,\n    loggedInGreeting: undefined,\n    loggedOutGreeting: undefined,\n    greetingDialogDisplay: undefined,\n    greetingDialogDelay: undefined,\n    autoLogAppEvents: true,\n    xfbml: true,\n    version: \"6.0\",\n    onCustomerChatDialogShow: undefined,\n    onCustomerChatDialogHide: undefined\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.setFbAsyncInit = this.setFbAsyncInit.bind(this);\n    this.reloadSDKAsynchronously = this.reloadSDKAsynchronously.bind(this);\n    this.loadSDKAsynchronously = this.loadSDKAsynchronously.bind(this);\n    this.createMarkup = this.createMarkup.bind(this);\n    this.controlPlugin = this.controlPlugin.bind(this);\n    this.subscribeEvents = this.subscribeEvents.bind(this);\n    this.removeFacebookSDK = this.removeFacebookSDK.bind(this);\n\n    this.state = {\n      fbLoaded: false,\n      shouldShowDialog: undefined\n    };\n  }\n\n  componentDidMount() {\n    this.setFbAsyncInit();\n    this.reloadSDKAsynchronously();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (\n      prevProps.pageId !== this.props.pageId ||\n      // prevProps.appId !== this.props.appId ||\n      prevProps.shouldShowDialog !== this.props.shouldShowDialog ||\n      prevProps.htmlRef !== this.props.htmlRef ||\n      prevProps.minimized !== this.props.minimized ||\n      prevProps.themeColor !== this.props.themeColor ||\n      prevProps.loggedInGreeting !== this.props.loggedInGreeting ||\n      prevProps.loggedOutGreeting !== this.props.loggedOutGreeting ||\n      prevProps.greetingDialogDisplay !== this.props.greetingDialogDisplay ||\n      prevProps.greetingDialogDelay !== this.props.greetingDialogDelay ||\n      prevProps.autoLogAppEvents !== this.props.autoLogAppEvents ||\n      prevProps.xfbml !== this.props.xfbml ||\n      prevProps.version !== this.props.version ||\n      prevProps.language !== this.props.language\n    ) {\n      this.setFbAsyncInit();\n      this.reloadSDKAsynchronously();\n    }\n  }\n\n  setFbAsyncInit() {\n    const { autoLogAppEvents, xfbml, version } = this.props;\n\n    window.fbAsyncInit = () => {\n      window.FB.init({\n        // appId,\n        autoLogAppEvents,\n        xfbml,\n        version: `v${version}`\n      });\n\n      this.setState({ fbLoaded: true });\n    };\n  }\n\n  loadSDKAsynchronously() {\n    // const { language } = this.props\n    /* eslint-disable */\n    (function(d, s, id) {\n      var js,\n        fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) {\n        return;\n      }\n      js = d.createElement(s);\n      js.id = id;\n      js.src = `https://connect.facebook.net/vi_VN/sdk/xfbml.customerchat.js`;\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, \"script\", \"facebook-jssdk\");\n    /* eslint-enable */\n  }\n\n  removeFacebookSDK() {\n    removeElementByIds([\"facebook-jssdk\", \"fb-root\"]);\n    delete window.FB;\n  }\n\n  reloadSDKAsynchronously() {\n    this.removeFacebookSDK();\n    this.loadSDKAsynchronously();\n  }\n\n  controlPlugin() {\n    const { shouldShowDialog } = this.props;\n\n    if (shouldShowDialog) {\n      window.FB.CustomerChat.showDialog();\n    } else {\n      window.FB.CustomerChat.hideDialog();\n    }\n  }\n\n  subscribeEvents() {\n    const { onCustomerChatDialogShow, onCustomerChatDialogHide } = this.props;\n\n    if (onCustomerChatDialogShow) {\n      window.FB.Event.subscribe(\n        \"customerchat.dialogShow\",\n        onCustomerChatDialogShow\n      );\n    }\n\n    if (onCustomerChatDialogHide) {\n      window.FB.Event.subscribe(\n        \"customerchat.dialogHide\",\n        onCustomerChatDialogHide\n      );\n    }\n  }\n\n  createMarkup() {\n    const {\n      pageId,\n      htmlRef,\n      minimized,\n      themeColor,\n      loggedInGreeting,\n      loggedOutGreeting,\n      greetingDialogDisplay,\n      greetingDialogDelay\n    } = this.props;\n\n    const refAttribute = htmlRef !== undefined ? `ref=\"${htmlRef}\"` : \"\";\n\n    const minimizedAttribute =\n      minimized !== undefined ? `minimized=\"${minimized}\"` : \"\";\n\n    const themeColorAttribute =\n      themeColor !== undefined ? `theme_color=\"${themeColor}\"` : \"\";\n\n    const loggedInGreetingAttribute =\n      loggedInGreeting !== undefined\n        ? `logged_in_greeting=\"${loggedInGreeting}\"`\n        : \"\";\n\n    const loggedOutGreetingAttribute =\n      loggedOutGreeting !== undefined\n        ? `logged_out_greeting=\"${loggedOutGreeting}\"`\n        : \"\";\n\n    const greetingDialogDisplayAttribute =\n      greetingDialogDisplay !== undefined\n        ? `greeting_dialog_display=\"${greetingDialogDisplay}\"`\n        : \"\";\n\n    const greetingDialogDelayAttribute =\n      greetingDialogDelay !== undefined\n        ? `greeting_dialog_delay=\"${greetingDialogDelay}\"`\n        : \"\";\n\n    return {\n      __html: `<div\n             class=\"fb-customerchat\"\n             page_id=\"${pageId}\"\n             ${refAttribute}\n             ${minimizedAttribute}\n             ${themeColorAttribute}\n             ${loggedInGreetingAttribute}\n             ${loggedOutGreetingAttribute}\n             ${greetingDialogDisplayAttribute}\n             ${greetingDialogDelayAttribute}\n           ></div>`\n    };\n  }\n\n  render() {\n    const { fbLoaded, shouldShowDialog } = this.state;\n\n    if (fbLoaded && shouldShowDialog !== this.props.shouldShowDialog) {\n      document.addEventListener(\n        \"DOMNodeInserted\",\n        event => {\n          const element = event.target;\n          if (\n            element.className &&\n            typeof element.className === \"string\" &&\n            element.className.includes(\"fb_dialog\")\n          ) {\n            this.controlPlugin();\n          }\n        },\n        false\n      );\n      this.subscribeEvents();\n    }\n    // Add a random key to rerender. Reference:\n    // https://stackoverflow.com/questions/30242530/dangerouslysetinnerhtml-doesnt-update-during-render\n    return <div key={Date()} dangerouslySetInnerHTML={this.createMarkup()} />;\n  }\n}\n\nexport default MessengerChat;\n"]},"metadata":{},"sourceType":"module"}