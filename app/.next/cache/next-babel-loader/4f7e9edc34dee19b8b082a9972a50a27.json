{"ast":null,"code":"var _jsxFileName = \"/home/truongduchuy910/apps/tuvi/app/pages/index.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { withAuthSync } from \"../utils/auth\";\nimport cookie from \"js-cookie\";\nimport { useState } from \"react\";\nimport Layout from \"../src/Layout\";\nimport AllKetQuas from \"../components/ketQuas/allKetQuas\";\nimport CreateKetQua from \"../components/ketQuas/createKetQua\";\nimport request from \"../components/config/request\";\nimport Logo from \"../src/logo\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { Typography } from \"@material-ui/core\";\nimport LightBoard from \"../src/LightBoard\";\nimport Logout from \"../components/user/logout\";\n\nlet Index = props => {\n  // variables\n  async function getAllCungs() {\n    let {\n      data: {\n        allKetQuas\n      }\n    } = await request({\n      body: {\n        query: `query {\n          allKetQuas(orderBy: \"time_DESC\") {\n            id\n            cung {\n              name\n            }\n            ketQua {\n              id\n              cung {\n                name\n              }\n              chinhTinh {\n                id\n                name\n              }\n              phuTinh {\n                id\n                name\n              }\n              giai\n            }\n          }\n        }\n        `\n      }\n    });\n    return allKetQuas;\n  }\n\n  let {\n    0: allKetQuas,\n    1: setAllKetQuas\n  } = useState(props.allKetQuas);\n  return __jsx(Layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, __jsx(Grid, {\n    container: true,\n    spacing: 1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, __jsx(Grid, {\n    item: true,\n    xs: 12,\n    md: 5,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, __jsx(Logo, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  })), __jsx(Grid, {\n    item: true,\n    xs: 7,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, __jsx(LightBoard, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  })), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, __jsx(LightBoard, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, __jsx(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"GIOI THIEU\"))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, __jsx(LightBoard, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, __jsx(CreateKetQua, {\n    token: props.token,\n    allCungs: props.allCungs,\n    allCungVis: props.allCungVis,\n    allTinhs: props.allTinhs,\n    allPhuTinhs: props.allPhuTinhs,\n    onCreate: async ({\n      data,\n      errors\n    }) => {\n      let response = await getAllCungs();\n      setAllKetQuas(response);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }))), __jsx(Grid, {\n    item: true,\n    xs: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, __jsx(LightBoard, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, __jsx(Typography, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, props.email), __jsx(Logout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }), __jsx(AllKetQuas, {\n    allKetQuas: allKetQuas,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  })))));\n};\n\nIndex.getInitialProps = async ({\n  res,\n  client\n}) => {\n  //get variables from server\n  const query = `query {\n    allCungs {\n      id\n      name\n      tieuDe1\n      tieuDe2\n      tieuDe3\n      tieuDe4\n      tieuDe5\n    }\n    allCungVis {\n      id\n      name\n    }\n    allTinhs {\n      id\n      name\n    }\n    allPhuTinhs {\n      id\n      name\n    }\n    allKetQuas (orderBy: \"time_DESC\") {\n      id\n      cung {\n        name\n      }\n      ketQua {\n        id\n        cung {\n          name\n        }\n        chinhTinh {\n          id\n          name\n        }\n        phuTinh {\n          id\n          name\n        }\n        giai\n      }\n    }\n  }`;\n\n  try {\n    const data = await client.request(query);\n    return data;\n  } catch (error) {\n    cookie.remove(\"token\");\n\n    if (res) {\n      res.writeHead(302, {\n        Location: \"/login\"\n      });\n      res.end();\n    }\n  }\n};\n\nexport default withAuthSync(Index);","map":{"version":3,"sources":["/home/truongduchuy910/apps/tuvi/app/pages/index.js"],"names":["withAuthSync","cookie","useState","Layout","AllKetQuas","CreateKetQua","request","Logo","Grid","Typography","LightBoard","Logout","Index","props","getAllCungs","data","allKetQuas","body","query","setAllKetQuas","token","allCungs","allCungVis","allTinhs","allPhuTinhs","errors","response","email","getInitialProps","res","client","error","remove","writeHead","Location","end"],"mappings":";;;AAAA,SAASA,YAAT,QAA6B,eAA7B;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,OAAOC,MAAP,MAAmB,eAAnB;AACA,OAAOC,UAAP,MAAuB,kCAAvB;AACA,OAAOC,YAAP,MAAyB,oCAAzB;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,SAASC,UAAT,QAA2B,mBAA3B;AACA,OAAOC,UAAP,MAAuB,mBAAvB;AAEA,OAAOC,MAAP,MAAmB,2BAAnB;;AACA,IAAIC,KAAK,GAAGC,KAAK,IAAI;AACnB;AACA,iBAAeC,WAAf,GAA6B;AAC3B,QAAI;AACFC,MAAAA,IAAI,EAAE;AAAEC,QAAAA;AAAF;AADJ,QAEA,MAAMV,OAAO,CAAC;AAChBW,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAG;;;;;;;;;;;;;;;;;;;;;;;;AADJ;AADU,KAAD,CAFjB;AA8BA,WAAOF,UAAP;AACD;;AACD,MAAI;AAAA,OAACA,UAAD;AAAA,OAAaG;AAAb,MAA8BjB,QAAQ,CAACW,KAAK,CAACG,UAAP,CAA1C;AACA,SACE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIE,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,EAOE,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,CADF,CAPF,EAYE,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AACE,IAAA,KAAK,EAAEH,KAAK,CAACO,KADf;AAEE,IAAA,QAAQ,EAAEP,KAAK,CAACQ,QAFlB;AAGE,IAAA,UAAU,EAAER,KAAK,CAACS,UAHpB;AAIE,IAAA,QAAQ,EAAET,KAAK,CAACU,QAJlB;AAKE,IAAA,WAAW,EAAEV,KAAK,CAACW,WALrB;AAME,IAAA,QAAQ,EAAE,OAAO;AAAET,MAAAA,IAAF;AAAQU,MAAAA;AAAR,KAAP,KAA4B;AACpC,UAAIC,QAAQ,GAAG,MAAMZ,WAAW,EAAhC;AACAK,MAAAA,aAAa,CAACO,QAAD,CAAb;AACD,KATH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CAZF,EA4BE,MAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAab,KAAK,CAACc,KAAnB,CADF,EAEE,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE,MAAC,UAAD;AAAY,IAAA,UAAU,EAAEX,UAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CADF,CA5BF,CADF,CADF;AAwCD,CA5ED;;AA8EAJ,KAAK,CAACgB,eAAN,GAAwB,OAAO;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAP,KAA2B;AACjD;AACA,QAAMZ,KAAK,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAAf;;AA4CA,MAAI;AACF,UAAMH,IAAI,GAAG,MAAMe,MAAM,CAACxB,OAAP,CAAeY,KAAf,CAAnB;AACA,WAAOH,IAAP;AACD,GAHD,CAGE,OAAOgB,KAAP,EAAc;AACd9B,IAAAA,MAAM,CAAC+B,MAAP,CAAc,OAAd;;AACA,QAAIH,GAAJ,EAAS;AACPA,MAAAA,GAAG,CAACI,SAAJ,CAAc,GAAd,EAAmB;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAAnB;AACAL,MAAAA,GAAG,CAACM,GAAJ;AACD;AACF;AACF,CAxDD;;AAyDA,eAAenC,YAAY,CAACY,KAAD,CAA3B","sourcesContent":["import { withAuthSync } from \"../utils/auth\";\nimport cookie from \"js-cookie\";\nimport { useState } from \"react\";\nimport Layout from \"../src/Layout\";\nimport AllKetQuas from \"../components/ketQuas/allKetQuas\";\nimport CreateKetQua from \"../components/ketQuas/createKetQua\";\nimport request from \"../components/config/request\";\nimport Logo from \"../src/logo\";\nimport Grid from \"@material-ui/core/Grid\";\nimport { Typography } from \"@material-ui/core\";\nimport LightBoard from \"../src/LightBoard\";\n\nimport Logout from \"../components/user/logout\";\nlet Index = props => {\n  // variables\n  async function getAllCungs() {\n    let {\n      data: { allKetQuas }\n    } = await request({\n      body: {\n        query: `query {\n          allKetQuas(orderBy: \"time_DESC\") {\n            id\n            cung {\n              name\n            }\n            ketQua {\n              id\n              cung {\n                name\n              }\n              chinhTinh {\n                id\n                name\n              }\n              phuTinh {\n                id\n                name\n              }\n              giai\n            }\n          }\n        }\n        `\n      }\n    });\n    return allKetQuas;\n  }\n  let [allKetQuas, setAllKetQuas] = useState(props.allKetQuas);\n  return (\n    <Layout>\n      <Grid container spacing={1}>\n        <Grid item xs={12} md={5}>\n          <Logo />\n        </Grid>\n        <Grid item xs={7}>\n          <LightBoard></LightBoard>\n        </Grid>\n        <Grid item xs={12}>\n          <LightBoard>\n            <Typography>GIOI THIEU</Typography>\n          </LightBoard>\n        </Grid>\n        <Grid item xs={12}>\n          <LightBoard>\n            <CreateKetQua\n              token={props.token}\n              allCungs={props.allCungs}\n              allCungVis={props.allCungVis}\n              allTinhs={props.allTinhs}\n              allPhuTinhs={props.allPhuTinhs}\n              onCreate={async ({ data, errors }) => {\n                let response = await getAllCungs();\n                setAllKetQuas(response);\n              }}\n            />\n          </LightBoard>\n        </Grid>\n\n        <Grid item xs={12}>\n          <LightBoard>\n            <Typography>{props.email}</Typography>\n            <Logout />\n            <AllKetQuas allKetQuas={allKetQuas} />\n          </LightBoard>\n        </Grid>\n      </Grid>\n    </Layout>\n  );\n};\n\nIndex.getInitialProps = async ({ res, client }) => {\n  //get variables from server\n  const query = `query {\n    allCungs {\n      id\n      name\n      tieuDe1\n      tieuDe2\n      tieuDe3\n      tieuDe4\n      tieuDe5\n    }\n    allCungVis {\n      id\n      name\n    }\n    allTinhs {\n      id\n      name\n    }\n    allPhuTinhs {\n      id\n      name\n    }\n    allKetQuas (orderBy: \"time_DESC\") {\n      id\n      cung {\n        name\n      }\n      ketQua {\n        id\n        cung {\n          name\n        }\n        chinhTinh {\n          id\n          name\n        }\n        phuTinh {\n          id\n          name\n        }\n        giai\n      }\n    }\n  }`;\n  try {\n    const data = await client.request(query);\n    return data;\n  } catch (error) {\n    cookie.remove(\"token\");\n    if (res) {\n      res.writeHead(302, { Location: \"/login\" });\n      res.end();\n    }\n  }\n};\nexport default withAuthSync(Index);\n"]},"metadata":{},"sourceType":"module"}